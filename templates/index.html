<!doctype html>
<html>
    <head>
        <title>FastAPI with Azure Styling</title>
        <link rel="stylesheet" type="text/css" href="/static/styles.css" />
        <!-- Link to the external CSS file -->
    </head>
    <body>
        <div class="container">
            <h1>AI Data Dot Rest</h1>

            <!-- Weekday section -->
            <div>
                <button onclick="getCurrentWeekday()">
                    Get Current Weekday
                </button>
                <p id="weekdayResponse"></p>
            </div>
        </div>
        <div>
            <h2>Pokémon Data</h2>
            <div>
                <input
                    type="text"
                    id="pokemonNameInput"
                    placeholder="Enter Pokémon name"
                />
                <input
                    type="text"
                    id="pokemonTypeInput"
                    placeholder="Enter Pokémon type"
                />
                <input
                    type="text"
                    id="pokemonDescInput"
                    placeholder="Enter Pokémon description"
                />
                <button onclick="addPokemon()">Add Pokémon</button>
            </div>
            <div>
                <input
                    type="text"
                    id="pokemonSearchInput"
                    placeholder="Search Pokémon by name"
                />
                <button onclick="getPokemon()">Get Pokémon</button>
                <p id="pokemonResponse"></p>
            </div>
        </div>
        <div class="random-pokemon-section">
            <h2>3x Random Pokémon For You</h2>
            <table class="random-pokemon-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pokemon in random_pokemon %}
                    <tr>
                        <td>{{ pokemon.name }}</td>
                        <td>{{ pokemon.type }}</td>
                        <td>{{ pokemon.description }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <script>
            async function getCurrentWeekday() {
                const responseContainer =
                    document.getElementById("weekdayResponse");

                try {
                    const response = await fetch("/weekday", { method: "GET" });

                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }

                    const responseData = await response.json();
                    responseContainer.textContent =
                        "Current Weekday: " + responseData.weekday;
                } catch (e) {
                    responseContainer.textContent = "Error: " + e.message;
                }
            }

            async function addPokemon() {
                const name = document.getElementById("pokemonNameInput").value;
                const type = document.getElementById("pokemonTypeInput").value;
                const description =
                    document.getElementById("pokemonDescInput").value;
                const responseContainer =
                    document.getElementById("pokemonResponse");

                try {
                    const response = await fetch("/pokemon", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            name: name,
                            type: type,
                            description: description,
                        }),
                    });

                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }

                    const responseData = await response.json();
                    responseContainer.textContent = responseData.message;
                } catch (e) {
                    responseContainer.textContent = "Error: " + e.message;
                }
            }

            async function getPokemon() {
                const name =
                    document.getElementById("pokemonSearchInput").value;
                const responseContainer =
                    document.getElementById("pokemonResponse");

                try {
                    const response = await fetch(`/pokemon/${name}`, {
                        method: "GET",
                    });

                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }

                    const responseData = await response.json();
                    responseContainer.textContent =
                        "Name: " +
                        responseData.name +
                        ", Type: " +
                        responseData.type +
                        ", Description: " +
                        responseData.description;
                } catch (e) {
                    responseContainer.textContent = "Error: " + e.message;
                }
            }
        </script>
    </body>
</html>
