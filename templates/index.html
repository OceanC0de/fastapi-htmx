<!doctype html>
<html>
    <head>
        <title>FastAPI with Azure Styling</title>
        <style>
            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                background-color: #f3f2f1;
                margin: 0;
                padding: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
                text-align: center;
            }
            .container {
                background-color: white;
                margin: 20px;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
                width: 90%; /* Makes the container responsive */
                max-width: 400px; /* Maximum width of the container */
            }
            input[type="text"],
            button {
                padding: 10px;
                width: 80%; /* Makes the input and button take up 80% of their container */
                margin: 10px 0; /* Adds top and bottom margin */
                box-sizing: border-box; /* Includes padding and border in the element's total width and height */
                border: 1px solid #0078d4;
                border-radius: 4px;
            }
            button {
                background-color: #0078d4;
                color: white;
                cursor: pointer;
                border: none;
            }
            button:hover {
                background-color: #005a9e;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Welcome to My Azure-themed FastAPI App</h1>

            <!-- Weekday section -->
            <div>
                <button onclick="getCurrentWeekday()">
                    Get Current Weekday
                </button>
                <p id="weekdayResponse"></p>
            </div>
        </div>
        <div>
            <h2>Pokémon Data</h2>
            <div>
                <input
                    type="text"
                    id="pokemonNameInput"
                    placeholder="Enter Pokémon name"
                />
                <input
                    type="text"
                    id="pokemonTypeInput"
                    placeholder="Enter Pokémon type"
                />
                <input
                    type="text"
                    id="pokemonDescInput"
                    placeholder="Enter Pokémon description"
                />
                <button onclick="addPokemon()">Add Pokémon</button>
            </div>
            <div>
                <input
                    type="text"
                    id="pokemonSearchInput"
                    placeholder="Search Pokémon by name"
                />
                <button onclick="getPokemon()">Get Pokémon</button>
                <p id="pokemonResponse"></p>
            </div>
        </div>
        <script>
            async function getCurrentWeekday() {
                const responseContainer =
                    document.getElementById("weekdayResponse");

                try {
                    const response = await fetch("/weekday", { method: "GET" });

                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }

                    const responseData = await response.json();
                    responseContainer.textContent =
                        "Current Weekday: " + responseData.weekday;
                } catch (e) {
                    responseContainer.textContent = "Error: " + e.message;
                }
            }

            async function addPokemon() {
                const name = document.getElementById("pokemonNameInput").value;
                const type = document.getElementById("pokemonTypeInput").value;
                const description =
                    document.getElementById("pokemonDescInput").value;
                const responseContainer =
                    document.getElementById("pokemonResponse");

                try {
                    const response = await fetch("/pokemon", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            name: name,
                            type: type,
                            description: description,
                        }),
                    });

                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }

                    const responseData = await response.json();
                    responseContainer.textContent = responseData.message;
                } catch (e) {
                    responseContainer.textContent = "Error: " + e.message;
                }
            }

            async function getPokemon() {
                const name =
                    document.getElementById("pokemonSearchInput").value;
                const responseContainer =
                    document.getElementById("pokemonResponse");

                try {
                    const response = await fetch(`/pokemon/${name}`, {
                        method: "GET",
                    });

                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }

                    const responseData = await response.json();
                    responseContainer.textContent =
                        "Name: " +
                        responseData.name +
                        ", Type: " +
                        responseData.type +
                        ", Description: " +
                        responseData.description;
                } catch (e) {
                    responseContainer.textContent = "Error: " + e.message;
                }
            }
        </script>
    </body>
</html>
